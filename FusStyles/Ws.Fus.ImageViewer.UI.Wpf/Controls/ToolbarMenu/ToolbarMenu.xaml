<UserControl x:Class="Ws.Fus.ImageViewer.UI.Wpf.Controls.ToolbarMenu.ToolbarMenu"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  xmlns:extension="http://schemas.insightec.com/wpf/"             
  xmlns:local="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.Controls.ToolbarMenu"
  xmlns:localConverters="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.Converters"
  xmlns:localBeh="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.Behaviors"
  xmlns:sm="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.Controls.StripsMenu"
  xmlns:prism="http://prismlibrary.com/"
  mc:Ignorable="d" 
  d:DesignHeight="300" d:DesignWidth="300">
  <!--xmlns:sliderVms="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.ImageModes.Slider.ViewModels"
  xmlns:sliderViews="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.ImageModes.Slider.Views"
  xmlns:flickerVms="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.ImageModes.Flicker.ViewModels"
  xmlns:flickerViews="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.ImageModes.Flicker.Views"
  xmlns:fusionVms="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.ImageModes.Fusion.ViewModels"
  xmlns:fusionViews="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.ImageModes.Fusion.Views"-->
  <!-- The data context for this view is IFusCommands interface -->
  <UserControl.Resources>
    <extension:NullToVisibilityConverter x:Key="null2Vis" />
    
    <!--<DataTemplate DataType="{x:Type sliderVms:SliderModeControlViewModel}">
      <sliderViews:SliderModeControlView/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type flickerVms:FlickerModeControlViewModel}">
      <flickerViews:FlickerModeControlView/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type fusionVms:FusionModeControlViewModel}">
      <fusionViews:FusionModeControlView/>
    </DataTemplate>-->

    <!--<localConverters:CompositeOverlayVmConverter x:Key="compositeOvl" />
    <localConverters:MultiMeasureVmConverter x:Key="multiMsr" />-->
    
    <Style TargetType="MenuItem" x:Key="MenuItemStyle">
      <Setter Property="Background" Value="{StaticResource ApplicationBackgroundBrush}" />
      <Setter Property="Foreground" Value="{StaticResource ApplicationForgroundBrush}" />
    </Style>
    <Style TargetType="MenuItem" BasedOn="{StaticResource MenuItemStyle}" x:Key="Switch">
      <Setter Property="IsCheckable" Value="True"/>
    </Style>
    <Style TargetType="MenuItem" BasedOn="{StaticResource Switch}" x:Key="Ovl">
      <Setter Property="StaysOpenOnClick" Value="True"/>
    </Style>
  </UserControl.Resources>
  <Grid>
    <Grid Margin="10, 1" >
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

      <Menu  DataContext="{Binding Commands}" 
           Background="Transparent" Foreground="{StaticResource ApplicationForgroundBrush}" 
           VerticalAlignment="Center" Margin="1">
        <MenuItem Header="_View" DataContext="{Binding Measure}">
          <MenuItem localBeh:UiModeEnter.Mode="Zoom"
            Header="_Zoom"
            Style="{StaticResource Switch}" />
          <MenuItem localBeh:UiModeEnter.Mode="Pan"
            Header="_Pan"
            Style="{StaticResource Switch}" />
          <MenuItem localBeh:UiModeEnter.Mode="Windowing"
            Header="_Window"
            Style="{StaticResource Switch}" />
        </MenuItem>
        <MenuItem Header="_Measure" DataContext="{Binding Measure}">
          <MenuItem localBeh:UiModeEnter.Mode="MeasurementDistanceOverlay"
            Header="_Line" 
            Style="{StaticResource Switch}" />
          <MenuItem localBeh:UiModeEnter.Mode="MeasurementAreaOverlay"
            Header="_Area"
            Style="{StaticResource Switch}" />
          <MenuItem localBeh:UiModeEnter.Mode="MeasurementAngleOverlay"
            localBeh:UiModeEnter.SubMode="0"
            Header="_Angle"
            Style="{StaticResource Switch}" />
          <MenuItem localBeh:UiModeEnter.Mode="MeasurementAngleOverlay"
            localBeh:UiModeEnter.SubMode="90"
            Header="_90 Angle"
            Style="{StaticResource Switch}" />
          <MenuItem localBeh:UiModeEnter.Mode="FiducialsOverlay"
            Header="_Fiducial"
            Style="{StaticResource Switch}" />
        </MenuItem>
        <MenuItem Header="_Overlays" DataContext="{Binding Overlays}">
          <MenuItem localBeh:UiModeShow.Mode="IntersectingSlicesOverlay"
            Header="_Cross reference lines"
            Style="{StaticResource Ovl}" />
          <MenuItem localBeh:UiModeShow.Mode="TextOverlay"
            Header="_Image info"
            Style="{StaticResource Ovl}" />
          <!--<MenuItem Style="{StaticResource Ovl}" Header="_Lines &amp; Areas" DataContext="{Binding [MeasurementOverlay]}" />-->
          <MenuItem localBeh:UiModeShow.Modes="MeasurementDistanceOverlay,MeasurementAreaOverlay"
            Header="_Lines &amp; Areas"
            Style="{StaticResource Ovl}" />
          <MenuItem localBeh:UiModeShow.Mode="FiducialsOverlay"
            Header="_Fiducials"
            Style="{StaticResource Ovl}" />
          <MenuItem localBeh:UiModeShow.Mode="CalibrationDataOverlay"
            Header="_Transducer"
            Style="{StaticResource Ovl}" />
          <MenuItem localBeh:UiModeShow.Mode="BathLimitsOverlay"
            Header="_Envelope"
            Style="{StaticResource Ovl}" />
                <MenuItem localBeh:UiModeShow.Modes="MeshNPRAirOverlay,MeshNPROverlay,NPRPolygonsOverlay,RigidNPROverlay,MeshNPRMembraneFolds"
            Header="_Non-Pass Regions"
            Style="{StaticResource Ovl}" />
          <MenuItem localBeh:UiModeShow.Mode="PreOpSegmentationOverlay"
            Header="_Skull overlay"
            Style="{StaticResource Ovl}" />
          <MenuItem localBeh:UiModeShow.Mode="ACPCOverlay"
            Header="_AC-PC Markers"
            Style="{StaticResource Ovl}" />
        <MenuItem localBeh:UiModeShow.Mode="Tractography"
            Header="_Tracts"
            Style="{StaticResource Ovl}" />
       </MenuItem>
        <MenuItem Header="_Delete" DataContext="{Binding Delete}">
          <MenuItem Header="_Delete" 
            Command="{Binding DeleteCommand}"
            Style="{StaticResource MenuItemStyle}"/>
          <MenuItem Header="_Delete All" 
            Command="{Binding DeleteAllCommand}"
            Style="{StaticResource MenuItemStyle}"/>
        </MenuItem>
      </Menu>

      <ContentControl Grid.Column="1" Content="{Binding StripsViewerViewModel.ImageModeControl}" HorizontalAlignment="Left" />

      <Grid Grid.Column="1" VerticalAlignment="Center" Margin="1">
        <Grid.Resources>
          <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource ActiveBrush}" />
            <Setter Property="FontSize" Value="14" />
          </Style>
        </Grid.Resources>
        <TextBlock Text="DQA MODE" Visibility="Collapsed" />
        <TextBlock Text="Planning SESSION" Visibility="Collapsed" />
      </Grid>
    </Grid>
    <Rectangle Style="{DynamicResource BorderBottomLeftVerticalStyle}" extension:IndependentSize.Height="80"  />
    <Rectangle Style="{DynamicResource BorderBottomRightVerticalStyle}" extension:IndependentSize.Height="80" />
  </Grid>
</UserControl>
