<UserControl
  x:Class="Ws.Fus.ImageViewer.UI.Wpf.Controls.StripsMenu.StripsMenu"
  x:Name="parent"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:extensions="http://schemas.insightec.com/wpf/"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:sys="clr-namespace:System;assembly=mscorlib"
  xmlns:local="clr-namespace:Ws.Fus.ImageViewer.UI.Wpf.Controls.StripsMenu"
  mc:Ignorable="d" 
  d:DesignHeight="600"
  d:DesignWidth="120">
  
  <UserControl.Resources>
    <extensions:ConverterProxy x:Key="converterProxy" />
    <extensions:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
    <!--<local:StripOrientationToTextConverter x:Key="orientationConverter" />-->
    <!--<extensions:BindingProxy x:Key="proxy" Data="{Binding StripActionsHolder, ElementName=parent}" />-->
  </UserControl.Resources>
  <Grid>
    <ListView Name="lvStrips" Margin="5" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
      DataContext="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
      Background="{StaticResource XBrush.Application.Background}"
      ScrollViewer.HorizontalScrollBarVisibility="Hidden"
      BorderThickness="0" BorderBrush="Transparent"
      TextBlock.Foreground="{StaticResource XBrush.Application.Foreground}"
      ItemsSource="{Binding Path=Strips}"
      ItemTemplateSelector="{Binding Path=StripTemplateSelector}"        
      PreviewMouseLeftButtonDown="Strips_PreviewMouseLeftButtonDown"
      PreviewMouseMove="Strips_PreviewMouseMove">
      <!--ContextMenuOpening="ContextMenu_ContextMenuOpening">-->
      <!--<ListView.ItemTemplate>
        <DataTemplate>
          <ContentPresenter ContentTemplate="{StaticResource defaultStripTemplate}" />
        </DataTemplate>
      </ListView.ItemTemplate>-->
      <ListView.GroupStyle>
        <GroupStyle>
          <GroupStyle.HeaderTemplate>
            <DataTemplate>
              <TextBlock FontWeight="Bold" TextAlignment="Center" Text="{Binding Name}" />
            </DataTemplate>
          </GroupStyle.HeaderTemplate>
        </GroupStyle>
      </ListView.GroupStyle>
      <!--<ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
          <EventSetter Event="PreviewMouseRightButtonDown" Handler="OnItemPreviewMouseRightButtonDown" />
        </Style>
      </ListView.ItemContainerStyle>
      <ListView.ContextMenu>
        <ContextMenu SnapsToDevicePixels="True" >
          <ContextMenu.Style>
            <Style TargetType="{x:Type ContextMenu}">
              <Style.Triggers>
                <Trigger Property="HasItems" Value="False">
                  <Setter Property="Visibility" Value="Collapsed" />
                </Trigger>
              </Style.Triggers>
            </Style>
          </ContextMenu.Style>
          <MenuItem x:Name="LoadAct" Header="Load" Command="{Binding StripActionsHolder.LoadStripCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent.PlacementTarget.Tag}" />
          <MenuItem Header="Load to all" Command="{Binding StripActionsHolder.LoadToAllStripsCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent.PlacementTarget.Tag}" />
          <Separator Visibility="{Binding Visibility, Source={x:Reference LoadAct}}" />

           --><!--&#10; for 2lines--><!--
          <MenuItem x:Name="CopyRegAct" Header="Copy Registration" Command="{Binding StripActionsHolder.CopyRegistrationCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent.PlacementTarget.Tag}" Visibility="{Binding Command, RelativeSource={RelativeSource Self}, Converter={StaticResource NullToVisibilityConverter}, FallbackValue=Collapsed}" />
          <MenuItem x:Name="ClearRegAct" Header="Clear Registration" Command="{Binding StripActionsHolder.ClearRegistrationCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent.PlacementTarget.Tag}" Visibility="{Binding Command, RelativeSource={RelativeSource Self}, Converter={StaticResource NullToVisibilityConverter}, FallbackValue=Collapsed}"  />
          <Separator Visibility="{Binding Visibility, Source={x:Reference ClearRegAct}}" />

          <MenuItem Header="Delete Series" Command="{Binding StripActionsHolder.DeleteStripCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent.PlacementTarget.Tag}" />

        </ContextMenu>
      </ListView.ContextMenu>-->
    </ListView>
  </Grid>
</UserControl>
